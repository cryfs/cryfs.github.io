(window.webpackJsonp=window.webpackJsonp||[]).push([["3c9a"],{BLzl:function(e,t,a){"use strict";var n=a("ELrk"),r=a("sDqW"),o=a("q1tI"),s=a.n(o),i=a("17x9"),c=a.n(i),l=a("TSYQ"),m=a.n(l),d=a("33Jr"),h={tag:d.m,inverse:c.a.bool,color:c.a.string,block:Object(d.f)(c.a.bool,'Please use the props "body"'),body:c.a.bool,outline:c.a.bool,className:c.a.string,cssModule:c.a.object,innerRef:c.a.oneOfType([c.a.object,c.a.string,c.a.func])},p=function(e){var t=e.className,a=e.cssModule,o=e.color,i=e.block,c=e.body,l=e.inverse,h=e.outline,p=e.tag,u=e.innerRef,y=Object(r.a)(e,["className","cssModule","color","block","body","inverse","outline","tag","innerRef"]),f=Object(d.i)(m()(t,"card",!!l&&"text-white",!(!i&&!c)&&"card-body",!!o&&(h?"border":"bg")+"-"+o),a);return s.a.createElement(p,Object(n.a)({},y,{className:f,ref:u}))};p.propTypes=h,p.defaultProps={tag:"div"},t.a=p},K71S:function(e,t){e.exports="/_next/static/images/configfileencryption-3ae7bd61acfdd365aab16b721dbbcfad.png"},NXga:function(e,t,a){"use strict";a.r(t);var n=a("qNsG"),r=a("q1tI"),o=a.n(r),s=a("6qfE"),i=a("nNDh"),c=a("1Yj4"),l=a("ok1R"),m=a("rhny"),d=a("BLzl"),h=a("sOKU"),p=a("ElxX"),u=a("5Yp1"),y=a("BZnI"),f=a("YFqc"),g=a.n(f),b=a("xIc9"),E=a.n(b),w=a("K71S"),k=a.n(w);t.default=function(e){var t=e.components;Object(n.a)(e,["components"]);return o.a.createElement(s.MDXTag,{name:"wrapper",components:t},o.a.createElement(y.a,{title:"CryFS: How it works",url:"https://www.cryfs.org/howitworks",type:"article",description:"A description of the CryFS internals. CryFS encrypts your Dropbox and protects you against hackers and data leaks. It also works well together with other cloud providers."}),o.a.createElement(u.a,null,o.a.createElement(i.a,{start_index:1},o.a.createElement(p.a,{title:"How it works",subtitle:"We explain how CryFS works and why it is secure."},"The description can be a bit technical in some points. If you're rather interested in using CryFS, take a look at the ",o.a.createElement(g.a,{href:"/tutorial"},o.a.createElement("a",null,"CryFS Tutorial")),"."),o.a.createElement("section",null,o.a.createElement(c.a,null,o.a.createElement(s.MDXTag,{name:"h2",components:t},"Storing data"),o.a.createElement(l.a,null,o.a.createElement(m.a,{md:"4"},o.a.createElement("img",{src:E.a,alt:"Your files, metadata and directory structure are stored as a set of same-size blocks, encrypted, and stored in the cloud.",style:{maxWidth:"100%"}})),o.a.createElement(m.a,{md:"8"},o.a.createElement(s.MDXTag,{name:"p",components:t},"The goal of CryFS is not only to keep file contents, but also file sizes, metadata and directory structure confidential."),o.a.createElement(s.MDXTag,{name:"p",components:t},"To hide file sizes, CryFS splits the content of a file into same-size blocks and encrypts these blocks individually.\nA tree structure is used to remember how the blocks belong together to form a file.\nThis tree structure has very little overhead and itself is also stored using encrypted same-size blocks.\nTo hide file metadata and directory structure, they are also represented using encrypted same-size blocks."),o.a.createElement(s.MDXTag,{name:"p",components:t},"Each encrypted block is stored as a file in the base directory, using a random ID as filename.\nThe base directory can then be set up to be synchronized with a cloud provider like Dropbox.\nAn attacker with access to the base directory can only see a set of same-size ciphertext blocks and can't see\ncontents, file sizes, metadata or directory structure of your data."),o.a.createElement(s.MDXTag,{name:"p",components:t},"The blocks are encrypted using a block cipher chosen by the user. A random encryption key is generated when the filesystem is created.\nThis key is stored in a configuration file, which is then encrypted using the password chosen by the user.\nSince it is encrypted, it can be stored together with the ciphertext blocks in the cloud, which is the default.\nIf you want to use an insecure (e.g. empty) password or don't trust the scrypt algorithm used for encrypting the configuration file, you can also keep the configuration file locally."))))),o.a.createElement("section",null,o.a.createElement(c.a,null,o.a.createElement(s.MDXTag,{name:"h2",components:t},"Configuration File"),o.a.createElement(s.MDXTag,{name:"p",components:t},"The base directory also contains a configuration file with the information CryFS needs to decrypt it.\nThis configuration file is encrypted and integrity-checked using the password chosen by the user, so an attacker cannot read or modify it."),o.a.createElement(s.MDXTag,{name:"p",components:t},"The information stored in the configuration file includes the following."),o.a.createElement(s.MDXTag,{name:"ul",components:t},o.a.createElement(s.MDXTag,{name:"li",components:t,parentName:"ul"},o.a.createElement("strong",null,"[Cipher]"),": The cipher used (e.g. ",o.a.createElement("var",null,"aes-256-gcm"),")"),o.a.createElement(s.MDXTag,{name:"li",components:t,parentName:"ul"},o.a.createElement("strong",null,"[Encryption Key]"),": The encryption key used for encrypting blocks"),o.a.createElement(s.MDXTag,{name:"li",components:t,parentName:"ul"},o.a.createElement("strong",null,"[Root Block ID]"),": The block ID for the block storing the root directory (entry point for the filesystem)")),o.a.createElement(l.a,null,o.a.createElement(m.a,{md:"8"},o.a.createElement(s.MDXTag,{name:"p",components:t},"The configuration file is encrypted twice, once with ",o.a.createElement("var",null,"aes-256-gcm")," and once with the cipher chosen by the user.\nThis way, if the user doesn't trust ",o.a.createElement("var",null,"aes-256-gcm")," for some reason,\nthey can choose another cipher and still be secure.\nThe keys for both encryption layers are generated from the user-chosen password using ",o.a.createElement(s.MDXTag,{name:"a",components:t,parentName:"p",props:{href:"https://en.wikipedia.org/wiki/Scrypt"}},"scrypt"),"."),o.a.createElement(s.MDXTag,{name:"p",components:t},"In detail, CryFS generates two keys ",o.a.createElement("var",null,"outer_key")," and ",o.a.createElement("var",null,"inner_key")," using scrypt and the user password.\nIt encrypts the configuration file using the user cipher and ",o.a.createElement("var",null,"inner_key"),".\nTo the ciphertext, it prepends the name of the user cipher (so it knows how to decrypt it later) and encrypts\nthe result using ",o.a.createElement("var",null,"aes-256-gcm")," and ",o.a.createElement("var",null,"outer_key"),". This way, an attacker cannot see or manipulate which cipher is used.\nAs a last step, the scrypt configuration parameters are prepended, so CryFS knows how to configure scrypt when\ndecrypting the filesystem.\nWhen decrypting the configuration file, CryFS first reads the scrypt parameters and regenerates both keys from the user password.\nThen, it decrypts the first layer and reads the cipher chosen by the user.\nUsing this cipher, it decrypts the second layer and reads the configuration values.")),o.a.createElement(m.a,{md:"4",style:{marginTop:"20px"}},o.a.createElement("img",{src:k.a,alt:"Configuration File Encryption Layers",style:{maxWidth:"100%"}}))),o.a.createElement(s.MDXTag,{name:"p",components:t},"The integrity of the configuration file depends on ",o.a.createElement("var",null,"aes-256-gcm"),".\nThis cipher is a standard cipher and believed to be very secure.\nIf, however, you don't trust the integrity of ",o.a.createElement("var",null,"aes-256-gcm")," and want to use another cipher instead,\nwe recommend adding the ",o.a.createElement("kbd",null,"--cipher xxx")," parameter each time you mount the filesystem.\nThis way, CryFS can check that the cipher used by the filesystem is the one you actually specified\nand you don't have to rely on the ",o.a.createElement("var",null,"aes-256-gcm")," integrity verification step."),o.a.createElement(s.MDXTag,{name:"p",components:t},"Alternatively, you can store the configuration file outside of the base directory and not upload it into the cloud.",o.a.createElement("br",null),"\nThis is possible using the ",o.a.createElement("kbd",null,"--config")," parameter when calling CryFS."))),o.a.createElement("section",null,o.a.createElement(c.a,null,o.a.createElement(s.MDXTag,{name:"h2",components:t},"Security Analysis"),o.a.createElement(s.MDXTag,{name:"p",components:t},"The security of CryFS has been proven in a ",o.a.createElement(s.MDXTag,{name:"a",components:t,parentName:"p",props:{href:"/cryfs_mathesis.pdf"}},"master's thesis"),"\nand in a ",o.a.createElement(s.MDXTag,{name:"a",components:t,parentName:"p",props:{href:"http://dx.doi.org/10.1007/978-3-319-61176-1_23"}},"scientific paper published at DBSec 2017"),"\n(",o.a.createElement(s.MDXTag,{name:"a",components:t,parentName:"p",props:{href:"https://eprint.iacr.org/2017/773.pdf"}},"PDF"),") using a game-based security approach.\nThe works also contain a detailed description of the inner workings of CryFS."),o.a.createElement(s.MDXTag,{name:"p",components:t},"The current version meets all security goals regarding confidentiality of file contents, size, metadata and directory structure.\nThe integrity goals mentioned in the thesis are not fully implemented yet.\nThe current version protects the encrypted blocks from being modified by an attacker, since it uses an authenticated encryption scheme like ",o.a.createElement("var",null,"aes-256-gcm"),".\nHowever, it doesn't prevent an attacker yet from rolling back the filesystem by replacing blocks with an earlier valid version of the same block.\nThis issue will be addressed in future versions."))),o.a.createElement("section",null,o.a.createElement(c.a,null,o.a.createElement(l.a,null,o.a.createElement(m.a,{style:{marginTop:"20px"},md:{size:8,offset:2}},o.a.createElement(d.a,{body:!0,style:{backgroundColor:"#f5f5f5",borderColor:"#e3e3e3"}},o.a.createElement("div",{className:"text-center"},o.a.createElement("p",{className:"lead"},"Get started with the"),o.a.createElement(g.a,{href:"/tutorial"},o.a.createElement(h.a,{color:"primary",size:"lg"},"Tutorial")))))))))))}},"t+la":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/howitworks",function(){var e=a("NXga");return{page:e.default||e}}])},xIc9:function(e,t){e.exports="/_next/static/images/storingdata-6e5ee2b5bc550e4d8be92cbcd80b9011.png"}},[["t+la","5d41","9da1"]]]);